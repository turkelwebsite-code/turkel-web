---
import { X } from 'lucide-astro';

interface Props {
  locale: 'tr' | 'en';
}

const { locale } = Astro.props;
---

<!-- Modal Backdrop -->
<div id="contact-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
  <!-- Modal Container -->
  <div class="bg-white rounded-[15px] w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl">
    
    <!-- Sticky Header -->
    <div class="sticky top-0 bg-white rounded-t-[15px] border-b border-gray-200 p-6 z-10">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl font-bold text-gray-900" style="font-family: 'Radio Canada Big', sans-serif;">
          {locale === 'tr' ? 'İletişim Formu' : 'Contact Form'}
        </h2>
        <button 
          id="close-contact-modal"
          class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
          aria-label="Close modal"
        >
          <X size={24} class="text-gray-500" />
        </button>
      </div>
    </div>

    <!-- Form Content -->
    <div class="p-6">
      <form id="contact-form" class="space-y-6">
        
        <!-- Personal Information -->
        <div class="space-y-4">
          <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
            {locale === 'tr' ? 'Kişisel Bilgiler' : 'Personal Information'}
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Name -->
            <div>
              <label for="contact-name" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'Ad' : 'Name'} *
              </label>
              <input 
                type="text" 
                id="contact-name" 
                name="name" 
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
            
            <!-- Surname -->
            <div>
              <label for="contact-surname" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'Soyad' : 'Surname'} *
              </label>
              <input 
                type="text" 
                id="contact-surname" 
                name="surname" 
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Email -->
            <div>
              <label for="contact-email" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'E-posta' : 'Email'} *
              </label>
              <input 
                type="email" 
                id="contact-email" 
                name="email" 
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
            
            <!-- Phone -->
            <div>
              <label for="contact-phone" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'Telefon' : 'Phone'} *
              </label>
              <input 
                type="tel" 
                id="contact-phone" 
                name="phone" 
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
          </div>
        </div>

        <!-- Company Information -->
        <div class="space-y-4">
          <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
            {locale === 'tr' ? 'Şirket Bilgileri' : 'Company Information'}
          </h3>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Company Name -->
            <div>
              <label for="contact-company" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'Şirket Adı' : 'Company Name'}
              </label>
              <input 
                type="text" 
                id="contact-company" 
                name="company"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
            
            <!-- Title -->
            <div>
              <label for="contact-title" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                {locale === 'tr' ? 'Ünvan' : 'Title'}
              </label>
              <input 
                type="text" 
                id="contact-title" 
                name="title"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                style="font-family: 'Radio Canada Big', sans-serif;"
              />
            </div>
          </div>
        </div>

        <!-- Message -->
        <div class="space-y-4">
          <h3 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
            {locale === 'tr' ? 'Mesajınız' : 'Your Message'}
          </h3>
          
          <div>
            <label for="contact-subject" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
              {locale === 'tr' ? 'Konu' : 'Subject'} *
            </label>
            <input 
              type="text" 
              id="contact-subject" 
              name="subject" 
              required
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
              style="font-family: 'Radio Canada Big', sans-serif;"
            />
          </div>
          
          <div>
            <label for="contact-message" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
              {locale === 'tr' ? 'Mesaj' : 'Message'} *
            </label>
            <textarea 
              id="contact-message" 
              name="message" 
              required
              rows="5"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all resize-none"
              style="font-family: 'Radio Canada Big', sans-serif;"
              placeholder={locale === 'tr' ? 'Lütfen mesajınızı buraya yazın...' : 'Please write your message here...'}
            ></textarea>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200">
          <button 
            type="button" 
            id="cancel-contact-form"
            class="flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
            style="font-family: 'Radio Canada Big', sans-serif;"
          >
            {locale === 'tr' ? 'İptal' : 'Cancel'}
          </button>
          <button 
            type="submit"
            class="flex-1 px-6 py-3 bg-[#CE1A28] text-white rounded-lg hover:bg-[#B01620] transition-colors font-medium"
            style="font-family: 'Radio Canada Big', sans-serif;"
          >
            {locale === 'tr' ? 'Gönder' : 'Send'}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const modal = document.getElementById('contact-modal');
    const closeBtn = document.getElementById('close-contact-modal');
    const cancelBtn = document.getElementById('cancel-contact-form');
    const form = document.getElementById('contact-form');

    // Open modal function
    window.openContactModal = () => {
      if (modal) {
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        document.body.style.overflow = 'hidden';
      }
    };

    // Close modal function
    const closeModal = () => {
      if (modal) {
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = '';
        if (form) form.reset();
      }
    };

    // Event listeners
    if (closeBtn) closeBtn.addEventListener('click', closeModal);
    if (cancelBtn) cancelBtn.addEventListener('click', closeModal);

    // Close on backdrop click
    if (modal) {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
      });
    }

    // Form submission
    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        try {
          // Form submission logic here
          alert(document.documentElement.lang === 'tr' 
            ? 'Mesajınız başarıyla gönderildi. En kısa sürede size dönüş yapacağız.' 
            : 'Your message has been sent successfully. We will get back to you as soon as possible.'
          );
          closeModal();
        } catch (error) {
          console.error('Form submission error:', error);
          alert(document.documentElement.lang === 'tr' 
            ? 'Form gönderilirken bir hata oluştu. Lütfen tekrar deneyin.' 
            : 'An error occurred while submitting the form. Please try again.'
          );
        }
      });
    }
  });
</script>

<style>
  /* Custom scrollbar for modal */
  #contact-modal .overflow-y-auto::-webkit-scrollbar {
    width: 8px;
  }
  
  #contact-modal .overflow-y-auto::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
  }
  
  #contact-modal .overflow-y-auto::-webkit-scrollbar-thumb {
    background: #CE1A28;
    border-radius: 10px;
  }
  
  #contact-modal .overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: #B01620;
  }
</style>
