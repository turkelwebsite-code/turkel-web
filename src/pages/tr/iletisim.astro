---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import VisitorFormModal from '../../components/VisitorFormModal.astro';
import ParticipantFormModal from '../../components/ParticipantFormModal.astro';
import { FOOTER_CONTENT } from '../../lib/footer-content';
import { MapPin, Phone, Mail } from 'lucide-astro';

const locale = 'tr';

// SEO and page metadata
const title = 'İletişim | Türkel Fuarcılık';
const description = 'Türkel Fuarcılık ofislerimiz ve iletişim bilgileri. İstanbul merkez ofisi, Moskova ofisi ve Almatı ofisi iletişim detayları.';

// Use shared footer content
const footerContent = FOOTER_CONTENT[locale];

// Office data
const offices = [
  {
    name: 'Türkel Merkez Ofis',
    address: 'Huzur Mah. Fatih Cad. 4.Levent Plaza 67/6\n4.Levent, Sarıyer 34396 / İstanbul – Türkiye',
    phones: [
      { label: 'Telefon', number: '+90 (212) 284 23 00' }
    ],
    email: 'info@turkel.com.tr',
    country: 'Türkiye',
    flag: '🇹🇷'
  },
  {
    name: 'Türkel Moskova Ofisi',
    address: 'Expodeal LLC\nRussia, 115 419, Moscow, 2-nd Roschinskiy proezd, bld. 8, office 1108.',
    phones: [
      { label: 'Telefon', number: '+7 (985) 168-32-69' },
      { label: 'Telefon', number: '+7 (495) 787 88 24' }
    ],
    email: 'manager@turkelmoscow.ru',
    country: 'Rusya'
  },
  {
    name: 'ETF Almatı Ofisi',
    address: '313 Office, 3 Fl., 165B/72G, Shevchenko / Radostovtseva Str., Almaty – Kazakhstan',
    phones: [
      { label: 'Telefon', number: '+007 (727) 324 00 11 (11)' },
      { label: 'Telefon', number: '+007 (727) 324 00 11 (13)' }
    ],
    email: 'aysulu@crystal-adv.kz',
    country: 'Kazakistan',
    flag: '🇰🇿'
  }
];
---

<BaseLayout 
  title={title}
  description={description}
  locale={locale}
  canonical="/tr/iletisim"
>
  <!-- Header -->
  <Header locale={locale} />

  <!-- Main Content -->
  <main class="min-h-screen">

    <!-- Breadcrumb Section -->
    <section class="py-6 lg:py-8 relative" style="background-color: #FCFCFC;">
      <div class="mx-auto px-5" style="max-width: calc(100% - 20px);">
        <div class="container mx-auto px-4 lg:px-8">
          <nav class="flex items-center justify-center space-x-2 text-sm text-gray-600 mb-6" style="font-family: 'Radio Canada Big', sans-serif;">
            <a href="/tr/" class="hover:text-[#CE1A28] transition-colors">Ana Sayfa</a>
            <span>/</span>
            <span class="text-gray-900 font-medium">İletişim</span>
          </nav>
          
          <h1 class="text-3xl lg:text-4xl font-bold text-gray-900 text-center" style="font-family: 'Radio Canada Big', sans-serif;">
            İletişim
          </h1>
        </div>
      </div>
      
      <!-- Bottom Border Line -->
      <div class="absolute bottom-0 left-0 w-full h-0.5" style="background-color: #CE1A28;"></div>
    </section>

    <!-- Contact Content Section -->
    <section class="py-8 lg:py-12">
      <div class="mx-auto px-5" style="max-width: calc(100% - 20px); background-color: white; border-radius: 10px; margin: 10px auto;">
        <div class="container mx-auto px-4 lg:px-8">
          
          <!-- Section Header -->
          <div class="text-center mb-12">
            <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-4" style="font-family: 'Radio Canada Big', sans-serif;">
              Ofislerimiz
            </h2>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto" style="font-family: 'Radio Canada Big', sans-serif;">
              Türkiye, Rusya ve Kazakistan'daki ofislerimizle size en yakın noktadan hizmet veriyoruz.
            </p>
          </div>

          <!-- Offices Grid -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 mb-16">
            
            {offices.map((office) => (
              <div class="bg-white rounded-lg border-2 border-gray-100 hover:border-[#CE1A28] transition-all duration-300 p-6 lg:p-8 group">
                
                <!-- Office Header -->
                <div class="text-center mb-8">
                  <h3 class="text-xl lg:text-2xl font-bold text-gray-900 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                    {office.name}
                  </h3>
                  <div class="w-12 h-0.5 bg-[#CE1A28] mx-auto mt-3"></div>
                </div>

                <!-- Address Section -->
                <div class="h-24 mb-8">
                  <div class="flex items-start h-full">
                    <MapPin size={18} class="text-[#CE1A28] mr-3 mt-1 flex-shrink-0" />
                    <div class="flex-1">
                      <h4 class="font-semibold text-gray-900 mb-3" style="font-family: 'Radio Canada Big', sans-serif;">Adres</h4>
                      <p class="text-gray-700 text-sm leading-relaxed whitespace-pre-line" style="font-family: 'Radio Canada Big', sans-serif;">
                        {office.address}
                      </p>
                    </div>
                  </div>
                </div>

                <!-- Phone Section -->
                <div class="h-32 mb-8">
                  <div class="flex items-start h-full">
                    <Phone size={18} class="text-[#CE1A28] mr-3 mt-1 flex-shrink-0" />
                    <div class="flex-1">
                      <h4 class="font-semibold text-gray-900 mb-3" style="font-family: 'Radio Canada Big', sans-serif;">Telefon</h4>
                      <div class="space-y-2">
                        {office.phones.map((phone) => (
                          <div class="flex items-center justify-between">
                            <span class="text-xs text-gray-500 uppercase" style="font-family: 'Radio Canada Big', sans-serif;">
                              {phone.label}:
                            </span>
                            <a href={`tel:${phone.number.replace(/[^\d+]/g, '')}`} class="text-gray-700 text-sm hover:text-[#CE1A28] transition-colors" style="font-family: 'Radio Canada Big', sans-serif;">
                              {phone.number}
                            </a>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Email Section -->
                <div class="h-16 mb-6">
                  <div class="flex items-start h-full">
                    <Mail size={18} class="text-[#CE1A28] mr-3 mt-1 flex-shrink-0" />
                    <div class="flex-1">
                      <h4 class="font-semibold text-gray-900 mb-3" style="font-family: 'Radio Canada Big', sans-serif;">E-posta</h4>
                      <a href={`mailto:${office.email}`} class="text-gray-700 text-sm hover:text-[#CE1A28] transition-colors" style="font-family: 'Radio Canada Big', sans-serif;">
                        {office.email}
                      </a>
                    </div>
                  </div>
                </div>

              </div>
            ))}
          </div>

          <!-- Contact Form Section -->
          <div class="bg-gradient-to-br from-gray-50 to-white rounded-lg p-8 lg:p-12 border border-gray-200">
            <div class="text-center mb-8">
              <h3 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-4" style="font-family: 'Radio Canada Big', sans-serif;">
                Bizimle İletişime Geçin
              </h3>
              <p class="text-lg text-gray-600 max-w-2xl mx-auto" style="font-family: 'Radio Canada Big', sans-serif;">
                Fuar organizasyonu, nakliye, turizm hizmetleri ve daha fazlası için uzman ekibimizle iletişime geçin.
              </p>
            </div>
            
            <!-- Inline Contact Form -->
            <form 
              id="contact-form" 
              class="max-w-4xl mx-auto space-y-8"
            >
              <!-- Hidden fields -->
              <input type="hidden" name="form-type" value="contact" />
              <input type="hidden" name="language" value="tr" />
              
              <!-- Personal Information -->
              <div class="space-y-4">
                <h4 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                  Kişisel Bilgiler
                </h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Name -->
                  <div>
                    <label for="contact-name" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Ad *
                    </label>
                    <input 
                      type="text" 
                      id="contact-name" 
                      name="name" 
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                  
                  <!-- Surname -->
                  <div>
                    <label for="contact-surname" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Soyad *
                    </label>
                    <input 
                      type="text" 
                      id="contact-surname" 
                      name="surname" 
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                  
                  <!-- Email -->
                  <div>
                    <label for="contact-email" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      E-posta *
                    </label>
                    <input 
                      type="email" 
                      id="contact-email" 
                      name="email" 
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                  
                  <!-- Phone -->
                  <div>
                    <label for="contact-phone" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Telefon *
                    </label>
                    <input 
                      type="tel" 
                      id="contact-phone" 
                      name="phone" 
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                </div>
              </div>

              <!-- Company Information -->
              <div class="space-y-4">
                <h4 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                  Şirket Bilgileri
                </h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Company Name -->
                  <div>
                    <label for="contact-company" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Şirket Adı
                    </label>
                    <input 
                      type="text" 
                      id="contact-company" 
                      name="company"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                  
                  <!-- Title -->
                  <div>
                    <label for="contact-title" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Ünvan
                    </label>
                    <input 
                      type="text" 
                      id="contact-title" 
                      name="title"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                </div>
              </div>

              <!-- Message -->
              <div class="space-y-4">
                <h4 class="text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                  Mesajınız
                </h4>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Subject -->
                  <div>
                    <label for="contact-subject" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                      Konu *
                    </label>
                    <input 
                      type="text" 
                      id="contact-subject" 
                      name="subject" 
                      required
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all"
                      style="font-family: 'Radio Canada Big', sans-serif;"
                    />
                  </div>
                  
                  <!-- Empty div for grid alignment -->
                  <div></div>
                </div>
                
                <!-- Message -->
                <div>
                  <label for="contact-message" class="block text-sm font-medium text-gray-700 mb-2" style="font-family: 'Radio Canada Big', sans-serif;">
                    Mesaj *
                  </label>
                  <textarea 
                    id="contact-message" 
                    name="message" 
                    required
                    rows="5"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#CE1A28] focus:border-transparent transition-all resize-none"
                    style="font-family: 'Radio Canada Big', sans-serif;"
                    placeholder="Lütfen mesajınızı buraya yazın..."
                  ></textarea>
                </div>
              </div>



              <!-- Form Submit -->
              <div class="text-center pt-6 border-t border-gray-200">
                <button 
                  type="submit"
                  class="bg-[#CE1A28] text-white px-12 py-4 rounded-lg font-medium hover:bg-[#B01620] transition-colors text-lg"
                  style="font-family: 'Radio Canada Big', sans-serif;"
                >
                  Mesaj Gönder
                </button>
              </div>
              
            </form>
          </div>

        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <Footer locale={locale} content={footerContent} />

  <!-- Modals -->
  <VisitorFormModal locale={locale} />
  <ParticipantFormModal locale={locale} />
</BaseLayout>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('contact-form') as HTMLFormElement;
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      console.log('🚀 Contact Form: TR form gönderiliyor...');
      const formData = new FormData(form);
      
      // Web3Forms setup
      formData.append('access_key', '26c4e2e8-c895-4821-a0fd-450c838a96ec');
      formData.append('subject', '📧 Yeni İletişim Formu - ' + formData.get('fullName'));
      formData.append('from_name', 'Turkel Fuarcılık');
      formData.append('to_email', 'info@turkel.com.tr');
      
      // Email message
      const emailMessage = '📧 YENİ İLETİŞİM FORMU - TURKEL FUARCILIK\n\n' +
        '👤 KİŞİSEL BİLGİLER:\n' +
        '• Ad Soyad: ' + formData.get('fullName') + '\n' +
        '• Email: ' + formData.get('email') + '\n' +
        '• Telefon: ' + formData.get('phone') + '\n\n' +
        '💬 MESAJ:\n' + (formData.get('message') || 'Mesaj yok') + '\n\n' +
        '🎯 KONU: ' + (formData.get('subject') || 'Genel İletişim') + '\n\n' +
        '📅 Zaman: ' + new Date().toLocaleString('tr-TR');
      
      formData.append('message', emailMessage);
      
      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: formData
        });
        
        if (response.ok) {
          (form as HTMLFormElement).reset();
          showContactNotification();
        } else {
          alert('❌ Form gönderilemedi!');
        }
      } catch (error) {
        alert('❌ Bir hata oluştu!');
      }
    });
  }
  
  // Contact notification
  function showContactNotification() {
    const notification = document.createElement('div');
    notification.innerHTML = 
      '<div style="position: fixed; top: 20px; right: 20px; background: #28a745; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 9999; font-family: Arial, sans-serif;">' +
        '<div style="display: flex; align-items: center; gap: 10px;">' +
          '<span>📧</span>' +
          '<div>' +
            '<div style="font-weight: 600;">Mesajınız başarıyla gönderildi!</div>' +
            '<div style="font-size: 12px; opacity: 0.9;">En kısa sürede sizinle iletişime geçeceğiz.</div>' +
          '</div>' +
          '<button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: 10px;">✕</button>' +
        '</div>' +
      '</div>';
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.opacity = '0';
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => notification.remove(), 300);
    }, 5000);
  }
});
</script>

<style>
  /* Smooth animations */
  section {
    animation: fadeInUp 0.6s ease-out;
  }
  
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Office card hover effects */
  .group:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(206, 26, 40, 0.15);
  }
  
  /* Phone and email hover effects */
  a[href^="tel:"]:hover,
  a[href^="mailto:"]:hover {
    transform: translateX(4px);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .container {
      padding-left: 1rem;
      padding-right: 1rem;
    }
    
    /* Mobile office cards */
    .grid.lg\:grid-cols-3 {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    /* Mobile spacing adjustments */
    section.py-8 {
      padding-top: 1rem !important;
      padding-bottom: 1rem !important;
    }
    
    /* Content section mobile spacing */
    .py-8.lg\:py-12 {
      padding-top: 1rem !important;
      padding-bottom: 2rem !important;
    }
  }
  
  @media (min-width: 769px) and (max-width: 1023px) {
    /* Tablet view - 2 columns */
    .grid.lg\:grid-cols-3 {
      grid-template-columns: repeat(2, 1fr);
    }
    
    /* Third card spans both columns */
    .grid.lg\:grid-cols-3 > div:last-child {
      grid-column: span 2;
      max-width: 50%;
      margin: 0 auto;
    }
  }
</style>


